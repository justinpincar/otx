
RegExp.escape=function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');};(function($){$.csvDefaults={separator:',',delimiter:'"',escaper:'"',skip:0,headerLine:1,dataLine:2};$.csvEntry2Array=function(csv,meta){var meta=(meta!==undefined?meta:{});var separator='separator'in meta?meta.separator:$.csvDefaults.separator;var delimiter='delimiter'in meta?meta.delimiter:$.csvDefaults.delimiter;var escaper='escaper'in meta?meta.escaper:$.csvDefaults.escaper;separator=RegExp.escape(separator);delimiter=RegExp.escape(delimiter);escaper=RegExp.escape(escaper);var reValid=/^\s*(?:Y[^YZ]*(?:ZY[^YZ]*)*Y|[^XYZ\s]*(?:\s+[^XYZ\s]+)*)\s*(?:X\s*(?:Y[^YZ]*(?:ZY[^YZ]*)*Y|[^XYZ\s]*(?:\s+[^XYZ\s]+)*)\s*)*$/;var reValidSrc=reValid.source;reValidSrc=reValidSrc.replace(/X/g,separator);reValidSrc=reValidSrc.replace(/Y/g,delimiter);reValidSrc=reValidSrc.replace(/Z/g,escaper);reValid=RegExp(reValidSrc);var reValue=/(?!\s*$)\s*(?:Y([^YZ]*(?:ZY[^YZ]*)*)Y|([^XYZ\s]*(?:\s+[^XYZ\s]+)*))\s*(?:X|$)/;var reValueSrc=reValue.source;reValueSrc=reValueSrc.replace(/X/g,separator);reValueSrc=reValueSrc.replace(/Y/g,delimiter);reValueSrc=reValueSrc.replace(/Z/g,escaper);reValue=RegExp(reValueSrc,'g');if(csv===""){return[""];}
if(!reValid.test(csv)){return null;}
var output=[];csv.replace(reValue,function(m0,m1,m2){if(typeof m1==='string'&&m1.length){var reDelimiterUnescape=/ED/;var reDelimiterUnescapeSrc=reDelimiterUnescape.source;reDelimiterUnescapeSrc=reDelimiterUnescapeSrc.replace(/E/,escaper);reDelimiterUnescapeSrc=reDelimiterUnescapeSrc.replace(/D/,delimiter);reDelimiterUnescape=RegExp(reDelimiterUnescapeSrc,'g');output.push(m1.replace(reDelimiterUnescape,delimiter));}else if(m2!==undefined){output.push(m2);}
return'';});var reEmptyLast=/S\s*$/;reEmptyLast=RegExp(reEmptyLast.source.replace(/S/,separator));if(reEmptyLast.test(csv)){output.push('');}
return output;};$.array2CSVEntry=function(array,meta){var meta=(meta!==undefined?meta:{});var separator='separator'in meta?meta.separator:$.csvDefaults.separator;var delimiter='delimiter'in meta?meta.delimiter:$.csvDefaults.delimiter;var escaper='escaper'in meta?meta.escaper:$.csvDefaults.escaper;var output=[];for(i in array){output.push(array[i]);}
return output;};$.csv2Array=function(csv,meta){var meta=(meta!==undefined?meta:{});var separator='separator'in meta?meta.separator:$.csvDefaults.separator;var delimiter='delimiter'in meta?meta.delimiter:$.csvDefaults.delimiter;var escaper='escaper'in meta?meta.escaper:$.csvDefaults.escaper;var skip='skip'in meta?meta.skip:$.csvDefaults.skip;var output=[];var lines=csv.split(/\r\n|\r|\n/g);for(var i in lines){if(i<skip){continue;}
var line=$.csvEntry2Array(lines[i],{delimiter:delimiter,separator:separator,escaper:escaper});output.push(line);}
return output;};$.csv2Dictionary=function(csv,meta){var meta=(meta!==undefined?meta:{});var separator='separator'in meta?meta.separator:$.csvDefaults.separator;var delimiter='delimiter'in meta?meta.delimiter:$.csvDefaults.delimiter;var escaper='escaper'in meta?meta.escaper:$.csvDefaults.escaper;var headerLine='headerLine'in meta?meta.headerLine:$.csvDefaults.headerLine;var dataLine='dataLine'in meta?meta.dataLine:$.csvDefaults.dataLine;var lines=csv.split(/\r\n|\r|\n/g);var headers=$.csvEntry2Array(lines[(headerLine-1)]);var output=[];for(var i in lines){if(i<(dataLine-1)){continue;}
var line=$.csvEntry2Array(lines[i],{delimiter:delimiter,separator:separator,escaper:escaper});var lineDict={};for(var j in headers){lineDict[headers[j]]=line[j];}
output.push(lineDict);}
return output;};})(jQuery);